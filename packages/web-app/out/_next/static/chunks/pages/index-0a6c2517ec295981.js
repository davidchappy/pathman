(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(9466)}])},9466:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return Index}});var a,i,n=l(2322),r=l(2784);(a=i||(i={}))[a.Empty=0]="Empty",a[a.Pellet=1]="Pellet",a[a.PowerPellet=2]="PowerPellet",a[a.WallHorizontal=3]="WallHorizontal",a[a.WallVertical=4]="WallVertical",a[a.WallCornerTopLeft=5]="WallCornerTopLeft",a[a.WallCornerTopRight=6]="WallCornerTopRight",a[a.WallCornerBottomLeft=7]="WallCornerBottomLeft",a[a.WallCornerBottomRight=8]="WallCornerBottomRight",a[a.Pathman=9]="Pathman",a[a.Ghost=10]="Ghost";var o={pathman:{speed:1.5,startX:30,startY:30,startDirection:"none",size:18,mouthSpeed:.1,maxLowestAngle:-.6},ghosts:{speed:1,size:20},cellSize:20,colors:{primary:"yellow",background:"black",text:"yellow",secondaryText:"black",wall:"blue"},pellets:{size:2},powerPellets:{size:6},sidebarWidth:120,overlayMessages:{paused:"Paused. Press spacebar to continue.",gameOver:"Game over. Refresh to play again.",gameWon:"You won! Refresh to play again."},maze:{cells:[[5,3,3,3,3,6,5,3,6,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,6,5,3,3,3,3,3,3,3,5,3,3,3,3,6],[4,2,1,1,1,4,4,1,7,8,1,1,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,7,8,1,1,1,1,1,1,1,4,1,1,1,1,4],[4,1,5,6,1,4,4,1,5,6,1,5,4,8,1,3,3,3,3,3,3,3,3,3,3,1,3,3,3,3,3,3,3,1,1,1,1,1,5,6,1,5,4,1,4,1,3,6,1,4],[4,1,4,4,1,4,4,1,4,4,1,1,4,1,1,3,3,3,3,3,3,3,3,3,3,2,3,3,3,3,3,3,3,5,3,3,6,5,8,4,1,1,1,1,4,1,5,4,1,4],[4,1,4,4,1,4,4,1,8,7,1,1,8,1,1,3,3,3,3,3,3,3,3,3,3,1,3,3,3,3,3,3,3,7,3,3,8,7,3,8,1,3,1,3,4,1,4,8,1,4],[4,1,4,4,1,7,8,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,4],[4,1,4,4,1,1,1,1,5,3,3,3,6,1,1,5,3,3,3,6,1,1,5,3,3,3,3,6,1,1,5,6,1,5,6,1,1,5,3,3,3,6,1,5,3,3,8,1,5,4],[8,1,7,8,1,5,6,1,4,5,3,6,4,1,1,4,5,3,6,4,1,1,7,3,6,5,3,8,1,1,4,4,1,4,4,1,1,4,5,3,3,8,1,4,1,1,1,1,7,7],[0,1,1,1,1,4,4,1,4,7,3,8,4,1,1,4,4,0,4,4,1,1,1,1,4,4,1,1,1,1,4,4,3,4,4,1,1,4,7,3,3,6,1,4,1,3,3,6,9,0],[6,1,5,6,1,7,8,1,4,5,3,3,8,1,1,4,4,4,4,4,1,5,6,1,4,4,1,5,6,1,4,4,3,4,4,1,1,7,3,3,6,4,1,4,1,1,1,4,1,5],[4,1,4,4,1,1,1,1,4,4,1,1,1,1,1,4,4,7,8,4,1,7,8,1,4,4,1,4,4,1,4,4,1,4,4,1,1,5,3,3,8,4,1,4,5,6,1,1,1,4],[4,1,4,4,1,5,6,1,4,4,1,5,10,6,1,4,7,3,3,8,1,1,1,1,7,8,1,7,8,1,7,8,1,7,8,1,1,7,3,3,3,8,1,7,8,7,3,3,3,3],[4,1,4,4,1,4,4,1,4,4,1,4,10,4,1,1,1,1,1,1,1,5,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,8,6,1,1,1,1,1,1,1,4],[4,1,4,4,1,4,4,1,7,8,1,0,10,0,1,1,1,1,5,6,1,4,4,1,3,3,3,3,3,3,3,3,3,3,3,3,1,7,4,1,5,7,1,6,8,1,4,5,1,4],[4,1,7,8,1,4,4,1,1,1,1,4,10,4,1,5,6,1,4,4,1,4,4,1,3,3,3,3,3,3,3,3,3,3,3,3,1,4,6,1,1,1,1,4,4,1,4,7,1,4],[4,1,1,1,1,4,4,1,1,1,1,4,0,4,1,7,8,1,7,8,1,7,8,1,1,1,1,1,1,1,1,1,1,1,1,1,2,5,8,1,5,6,1,1,1,1,1,1,1,4],[7,3,3,3,3,8,7,3,3,3,3,8,3,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,8,7,3,3,3,3,3,3,3,8]],name:"default"},wallWidth:2,showGrid:!0,showRulers:!0};let calculateMazeDimensions=()=>{let e=o.maze.cells,t=e[0].length*o.cellSize,l=e.length*o.cellSize;return{x:t,y:l}},createEntities=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=[];return o.maze.cells.forEach((a,i)=>{a.forEach((a,n)=>{if(a===e){let e=n*o.cellSize+o.cellSize/2,a=i*o.cellSize+o.cellSize/2;l.push({x:e,y:a,currentCell:{x:n,y:i},...t})}})}),l},createPellets=()=>createEntities(i.Pellet),createPowerPellets=()=>createEntities(i.PowerPellet),createGhosts=()=>createEntities(i.Ghost,{direction:"none",isMoving:!1}).map((e,t)=>({id:"ghost-".concat(t),...e,path:[]})),createPathman=()=>{let e=createEntities(i.Pathman,{direction:"none",isMoving:!1})[0];return{...e,mouthOpening:!1,mouthAngle:0}},getInitialState=()=>{let e=createPellets(),t=createPowerPellets(),l=createGhosts(),a=createPathman();return{scale:1,pathman:a,previousAnimationTimestamp:void 0,ghosts:l,pellets:e,powerPellets:t,currentFPS:0,phase:"playing",overlayText:"",debug:{clickLocation:null,currentPathmanPosition:null}}};var src_draw=(e,t)=>{let l=e.getContext("2d"),a=document.createElement("canvas");a.width=e.width,a.height=e.height;let n=a.getContext("2d"),r={x:0,y:0,width:0,height:0},drawBackground=()=>{n.fillStyle=o.colors.background,l.fillRect(0,0,window.innerWidth/t.scale,window.innerHeight/t.scale)},calculateMazePosition=()=>{let t=o.maze.cells[0].length*o.cellSize,l=o.maze.cells.length*o.cellSize;return{x:e.width/2,y:e.height/2+l/2,width:t,height:l}};r=calculateMazePosition(),window.addEventListener("resize",()=>{r=calculateMazePosition()}),window.document.addEventListener("DOMContentLoaded",()=>{r=calculateMazePosition()});let drawMaze=()=>{let e=o.cellSize,t=o.maze.cells;l.save(),l.translate(r.x,r.y),t.forEach((t,a)=>{t.forEach((t,n)=>{let r=n*e,h=a*e;o.showGrid&&(l.strokeStyle="green",l.lineWidth=1,l.strokeRect(r,h,e,e)),t===i.WallHorizontal&&(l.fillStyle=o.colors.wall,l.fillRect(r,h+(e/2-o.wallWidth/2),e,o.wallWidth)),t===i.WallVertical&&(l.fillStyle=o.colors.wall,l.fillRect(r+(e/2-o.wallWidth/2),h,o.wallWidth,e)),t===i.WallCornerTopLeft&&(l.fillStyle=o.colors.wall,l.fillRect(r+(o.cellSize/2-o.wallWidth/2),h+(o.cellSize/2-o.wallWidth/2),o.cellSize/2+o.wallWidth/2,o.wallWidth),l.fillRect(r+(o.cellSize/2-o.wallWidth/2),h+(o.cellSize/2-o.wallWidth/2),o.wallWidth,o.cellSize/2+o.wallWidth/2)),t===i.WallCornerTopRight&&(l.fillStyle=o.colors.wall,l.fillRect(r,h+(o.cellSize/2-o.wallWidth/2),o.cellSize/2+o.wallWidth/2,o.wallWidth),l.fillRect(r+(o.cellSize/2-o.wallWidth/2),h+o.cellSize/2,o.wallWidth,o.cellSize/2)),t===i.WallCornerBottomLeft&&(l.fillStyle=o.colors.wall,l.fillRect(r+(o.cellSize/2-o.wallWidth/2),h,o.wallWidth,o.cellSize/2+o.wallWidth/2),l.fillRect(r+(o.cellSize/2-o.wallWidth/2),h+(o.cellSize/2-o.wallWidth/2),o.cellSize/2+o.wallWidth/2,o.wallWidth)),t===i.WallCornerBottomRight&&(l.fillStyle=o.colors.wall,l.fillRect(r,h+(o.cellSize/2-o.wallWidth/2),o.cellSize/2+o.wallWidth/2,o.wallWidth),l.fillRect(r+(o.cellSize/2-o.wallWidth/2),h,o.wallWidth,o.cellSize/2+o.wallWidth/2))})}),l.restore()},drawRulers=()=>{let e=o.cellSize;l.save(),l.translate(r.x-e,r.y-e),l.strokeStyle="red",l.lineWidth=1,l.beginPath(),l.moveTo(0,0),l.lineTo(r.width+2*e,0),l.stroke(),l.fillStyle="red",o.maze.cells[0].forEach((t,a)=>{l.fillText(a.toString(),o.cellSize+a*o.cellSize+o.cellSize/4,-e/2)}),l.fill(),l.strokeStyle="green",l.beginPath(),l.moveTo(0,0),l.lineTo(0,r.height+2*e),l.stroke(),l.fillStyle="green",o.maze.cells.forEach((t,a)=>{l.fillText(a.toString(),-e,o.cellSize+a*o.cellSize+o.cellSize/2)}),l.fill(),l.restore()},drawEntityRelativeToMaze=e=>{l.save(),l.translate(r.x,r.y),e(),l.restore()},drawStats=()=>{let e=o.sidebarWidth-10,a=o.sidebarWidth-10,i=l.canvas.width-e-10;l.strokeStyle=o.colors.primary,l.lineWidth=2,l.strokeRect(i,10,e,a),l.font="16px Helvetica, Arial, sans-serif",l.fillStyle=o.colors.primary,l.lineWidth=2;let n=i+10,r=10+(a-50)/2;l.textAlign="left",l.fillText("FPS: ".concat(t.currentFPS.toFixed(0)),n,r),l.fillText("Pellets: ".concat(t.pellets.length),n,r+20);let h=i+10,s=r+40,c=e-20;l.fillStyle=o.colors.primary,l.fillRect(h,s,c,30),l.fillStyle=o.colors.secondaryText,l.fillText("Reset",h+10,s+20)},drawPathman=()=>{drawEntityRelativeToMaze(()=>{let{x:e,y:a,mouthAngle:i,direction:n}=t.pathman,{size:r}=o.pathman,h=r/2;switch(l.save(),l.translate(e,a),n){case"right":l.rotate(0);break;case"down":l.rotate(Math.PI/2);break;case"left":l.rotate(Math.PI);break;case"up":l.rotate(-Math.PI/2)}l.beginPath(),l.arc(0,0,h,i,2*Math.PI-i,!0),l.fillStyle=o.colors.primary,l.lineTo(-3,0);let s=h*Math.cos(2*Math.PI-i),c=-h*Math.sin(2*Math.PI-i);l.moveTo(s,c),l.lineTo(0,0),l.fill(),l.restore()})},drawPellets=()=>{drawEntityRelativeToMaze(()=>{for(let e of t.pellets)l.beginPath(),l.arc(e.x,e.y,o.pellets.size,0,2*Math.PI,!0),l.fillStyle=o.colors.primary,l.fill();for(let e of t.powerPellets)l.beginPath(),l.arc(e.x,e.y,o.powerPellets.size,0,2*Math.PI,!0),l.fillStyle=o.colors.primary,l.fill()})},drawGhosts=()=>{drawEntityRelativeToMaze(()=>{let e=o.ghosts.size,a=e/2,i=["red","blue","pink","orange"];t.ghosts.forEach((t,n)=>{let r=i[n%i.length];l.fillStyle=r,l.beginPath(),l.arc(t.x+1,t.y,a,-.5*Math.PI,Math.PI+-.2*Math.PI,!0),l.arc(t.x-1,t.y,a,.2*Math.PI,Math.PI+.5*Math.PI,!0),l.fillRect(t.x-a+1,t.y-2,e-2,e/2),l.fill(),l.beginPath(),l.lineWidth=1,l.strokeStyle="black",l.fillStyle="black",l.moveTo(t.x-6,t.y+a),l.lineTo(t.x-4,t.y+a-6),l.lineTo(t.x,t.y+a),l.lineTo(t.x+4,t.y+a-6),l.lineTo(t.x+6,t.y+a),l.stroke(),l.fill(),l.beginPath(),l.fillStyle="white",l.arc(t.x-4,t.y-3,3,0,2*Math.PI,!0),l.arc(t.x+4,t.y-3,3,0,2*Math.PI,!0),l.fill(),l.beginPath(),l.fillStyle="black",l.arc(t.x-4,t.y-3.5,1.5,0,2*Math.PI,!0),l.arc(t.x+4,t.y-3.5,1.5,0,2*Math.PI,!0),l.fill()})})},drawOverlay=()=>{"playing"!==t.phase&&(l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,0,e.width,e.height),l.font="48px Helvetica, Arial, sans-serif",l.fillStyle="white",l.textAlign="center",l.fillText(t.overlayText,e.width/2,e.height/2))};return{draw:()=>{l.save(),l.scale(1,1),l.scale(t.scale,t.scale),drawBackground(),drawMaze(),o.showRulers&&drawRulers(),drawStats(),drawPathman(),drawPellets(),drawGhosts(),drawOverlay(),l.restore()},drawCurrentPathmanCell:()=>{if(null===t.debug.currentPathmanPosition)return;let{x:e,y:a}=t.debug.currentPathmanPosition,i=e*o.cellSize,n=a*o.cellSize;l.strokeStyle="red",l.lineWidth=2,l.strokeRect(i,n,o.cellSize,o.cellSize)},drawClickLocation:()=>{if(null===t.debug.clickLocation)return;let{x:e,y:a}=t.debug.clickLocation;l.beginPath(),l.arc(e,a,4,0,2*Math.PI,!0),l.fillStyle="red",l.fill()},drawOverlay,drawGhosts,drawPellets,drawPathman,drawStats,drawMaze,drawBackground}};let aStar=function(e,t,l){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=[],n=[],r=[],o={x:e.x,y:e.y,gCost:0,hCost:0,fCost:0},h={x:t.x,y:t.y};for(i.push(o);i.length>0;){let e=i[0];if(i.forEach(t=>{(t.fCost<e.fCost||t.fCost===e.fCost&&t.hCost<e.hCost)&&(e=t)}),i.splice(i.indexOf(e),1),n.push(e),e.x===h.x&&e.y===h.y){let t=e;for(;void 0!==t;)r.push({x:t.x,y:t.y,fCost:0,gCost:0,hCost:0}),t=t.parent;return r.reverse()}let t=a?function(e,t){let l=getNeighbors(e,t);for(let e=l.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[l[e],l[t]]=[l[t],l[e]]}return l}(e,l):getNeighbors(e,l);for(let l of t){if(n.some(e=>e.x===l.x&&e.y===l.y))continue;let t=e.gCost+1,a=Math.abs(l.x-h.x)+Math.abs(l.y-h.y),r=t+a;i.some(e=>e.x===l.x&&e.y===l.y)&&!(t<l.gCost)||(l.gCost=t,l.hCost=a,l.fCost=r,l.parent=e,i.some(e=>e.x===l.x&&e.y===l.y)||i.push(l))}}return[]};function getNeighbors(e,t){let l=[];for(let[a,n]of[[0,-1],[1,0],[0,1],[-1,0]]){let r=e.x+a,o=e.y+n;r>=0&&r<t[0].length&&o>=0&&o<t.length&&t[o][r]!==i.WallHorizontal&&t[o][r]!==i.WallVertical&&t[o][r]!==i.WallCornerTopLeft&&t[o][r]!==i.WallCornerTopRight&&t[o][r]!==i.WallCornerBottomLeft&&t[o][r]!==i.WallCornerBottomRight&&!l.some(e=>e.x===r&&e.y===o)&&!(e.x===r&&e.y===o)&&l.push({x:r,y:o,fCost:0,gCost:0,hCost:0})}return l}var src_game=e=>{let t=getInitialState(),{draw:l,drawOverlay:a}=src_draw(e,t),init=()=>{e.width=window.innerWidth,e.height=window.innerHeight,calculateScale()},calculateScale=()=>{let e=window.innerWidth/window.innerWidth;t.scale=e},updatePathman=()=>{var e,l,a,n;let r;let h=Math.floor(t.pathman.x/o.cellSize),s=Math.floor(t.pathman.y/o.cellSize);if(t.pathman.currentCell={x:h,y:s},t.pathman.isMoving){let e=o.pathman.mouthSpeed,l=o.pathman.maxLowestAngle;t.pathman.mouthOpening?(t.pathman.mouthAngle-=e,t.pathman.mouthAngle<l&&(t.pathman.mouthAngle=l,t.pathman.mouthOpening=!1)):(t.pathman.mouthAngle+=e,t.pathman.mouthAngle>0&&(t.pathman.mouthAngle=0,t.pathman.mouthOpening=!0))}if("none"===t.pathman.direction||!t.pathman.isMoving)return;let c=t.pathman.x,d=t.pathman.y;"right"===t.pathman.direction&&(c+=o.pathman.speed),"left"===t.pathman.direction&&(c-=o.pathman.speed),"up"===t.pathman.direction&&(d-=o.pathman.speed),"down"===t.pathman.direction&&(d+=o.pathman.speed);let p=o.pathman.size/2,u=o.maze.cells;t.debug.currentPathmanPosition={x:t.pathman.x,y:t.pathman.y,currentCell:{x:h,y:s}};let m=t.pathman.direction,w=!1;if("right"===m&&t.pathman.x>=h*o.cellSize+o.cellSize-p&&(r=null===(e=u[s])||void 0===e?void 0:e[h+1]),"left"===m&&t.pathman.x<=h*o.cellSize+p&&(r=null===(l=u[s])||void 0===l?void 0:l[h-1]),"up"===m&&t.pathman.y<=s*o.cellSize+p&&(r=null===(a=u[s-1])||void 0===a?void 0:a[h]),"down"===m&&t.pathman.y>=s*o.cellSize+o.cellSize-p&&(r=null===(n=u[s+1])||void 0===n?void 0:n[h]),(r===i.WallHorizontal||r===i.WallVertical||r===i.WallCornerTopLeft||r===i.WallCornerTopRight||r===i.WallCornerBottomLeft||r===i.WallCornerBottomRight)&&(w=!0),w){t.pathman.isMoving=!1;return}let{x:g,y:y}=calculateMazeDimensions();"right"===m&&c+p>g&&(c=0+p),"left"===m&&c-p<0&&(c=g-p),"up"===m&&d-p<0&&(d=y-p),"down"===m&&d+p>y&&(d=0+p),t.pathman.x=c,t.pathman.y=d,t.pathman.currentCell={x:Math.floor(c/o.cellSize),y:Math.floor(d/o.cellSize)}},updateGhosts=()=>{let e=t.ghosts;t.pathman.currentCell&&e.forEach((l,a)=>{var n,r,h,s,c,d,p,u,m;let w,g;let y=Math.floor(l.x/o.cellSize),f=Math.floor(l.y/o.cellSize),x={x:y,y:f};l.currentCell=x,0===l.path.length&&(l.path=aStar({x:l.currentCell.x,y:l.currentCell.y},{x:t.pathman.currentCell.x||1,y:t.pathman.currentCell.y||1},o.maze.cells));let S=o.ghosts.size/2,z=o.maze.cells,v=l.x,P=l.y;if(l.path.length>0){l.path[0].x===l.currentCell.x&&l.path[0].y===l.currentCell.y&&l.path.shift();let e=l.path[0];if(!e)return;l.direction=((e,t)=>{if(t.x===e.currentCell.x&&t.y===e.currentCell.y)return e.direction;let l=t.x*o.cellSize+o.cellSize/2,a=t.y*o.cellSize+o.cellSize/2,i=t.x-e.currentCell.x,n=t.y-e.currentCell.y,r="none";return(r="x"==(Math.abs(i)>Math.abs(n)?"x":"y")?i>0?"right":"left":n>0?"down":"up","none"===e.direction)?r:"right"===e.direction&&e.x<l||"left"===e.direction&&e.x>l||"up"===e.direction&&e.y>a||"down"===e.direction&&e.y<a?e.direction:r})(l,e)}"right"===l.direction&&(v+=o.ghosts.speed),"left"===l.direction&&(v-=o.ghosts.speed),"up"===l.direction&&(P-=o.ghosts.speed),"down"===l.direction&&(P+=o.ghosts.speed);let C=l.direction,W=!1;"right"===C&&l.x>=y*o.cellSize+o.cellSize-S&&(w=null===(s=z[f])||void 0===s?void 0:s[y+1],g={x:y+1,y:f}),"left"===C&&l.x<=y*o.cellSize+S&&(w=null===(c=z[f])||void 0===c?void 0:c[y-1],g={x:y-1,y:f}),"up"===C&&l.y<=f*o.cellSize+S&&(w=null===(d=z[f-1])||void 0===d?void 0:d[y],g={x:y,y:f-1}),"down"===C&&l.y>=f*o.cellSize+o.cellSize-S&&(w=null===(p=z[f+1])||void 0===p?void 0:p[y],g={x:y,y:f+1}),(w===i.WallHorizontal||w===i.WallVertical||w===i.WallCornerBottomLeft||w===i.WallCornerBottomRight||w===i.WallCornerTopLeft||w===i.WallCornerTopRight)&&(console.log("ghost collided with wall"),W=!0),(null==g?void 0:g.x)===(null===(n=t.pathman.currentCell)||void 0===n?void 0:n.x)&&(null==g?void 0:g.y)===(null===(r=t.pathman.currentCell)||void 0===r?void 0:r.y)&&(console.log("ghost collided with pathman"),W=!0,t.phase="game-over");let M=e.filter(e=>e.id!==l.id);if(M.forEach(e=>{(null==g?void 0:g.x)===e.currentCell.x&&(null==g?void 0:g.y)===e.currentCell.y&&(console.log("ghost collided with another ghost"),W=!0)}),W){l.isMoving=!1;return}let{x:k,y:T}=calculateMazeDimensions();"right"===C&&v+S>k&&(v=0+S),"left"===C&&v-S<0&&(v=k-S),"up"===C&&P-S<0&&(P=T-S),"down"===C&&P+S>T&&(P=0+S),l.x=v,l.y=P,l.currentCell={x:Math.floor(v/o.cellSize),y:Math.floor(P/o.cellSize)},(l.currentCell.x!==x.x||l.currentCell.y!==x.y)&&(l.path=aStar({x:l.currentCell.x,y:l.currentCell.y},{x:(null===(u=t.pathman.currentCell)||void 0===u?void 0:u.x)||1,y:(null===(m=t.pathman.currentCell)||void 0===m?void 0:m.y)||1},o.maze.cells)),null===(h=l.path)||void 0===h||h.length})},updatePellets=()=>{let e=o.pathman.size/2;for(let l=0;l<t.pellets.length;l++){let a=t.pellets[l],i=Math.sqrt(Math.pow(t.pathman.x-a.x,2)+Math.pow(t.pathman.y-a.y,2));i<e+o.pellets.size&&(t.pellets.splice(l,1),l--)}for(let l=0;l<t.powerPellets.length;l++){let a=t.powerPellets[l],i=Math.sqrt(Math.pow(t.pathman.x-a.x,2)+Math.pow(t.pathman.y-a.y,2));i<e+o.powerPellets.size&&(t.powerPellets.splice(l,1),l--)}},updateStats=e=>{t.currentFPS=1e3/e},handleResize=t=>{e.width=window.innerWidth,e.height=window.innerHeight,calculateScale(),l()},handleKeyUp=e=>{"game-over"!==t.phase&&"game-won"!==t.phase&&(" "===e.key&&(t.phase="paused"===t.phase?"playing":"paused","paused"===t.phase?(t.overlayText=o.overlayMessages.paused,a()):(t.overlayText="",requestAnimationFrame(animate))),"paused"!==t.phase&&(("ArrowRight"===e.key||"d"===e.key)&&(t.pathman.direction="right",t.pathman.isMoving=!0),("ArrowLeft"===e.key||"a"===e.key)&&(t.pathman.direction="left",t.pathman.isMoving=!0),("ArrowUp"===e.key||"w"===e.key)&&(t.pathman.direction="up",t.pathman.isMoving=!0),("ArrowDown"===e.key||"s"===e.key)&&(t.pathman.direction="down",t.pathman.isMoving=!0)))},handleClick=l=>{let a={x:l.clientX,y:l.clientY};setTimeout(()=>{t.debug.clickLocation=null},4e3),t.debug.clickLocation=a;let i={x:e.width-120,y:86,width:100,height:30};l.clientX>=i.x&&l.clientX<=i.x+i.width&&l.clientY>=i.y&&l.clientY<=i.y+i.height&&reset()},attachEvents=()=>{window.addEventListener("resize",handleResize),window.addEventListener("keyup",handleKeyUp),window.addEventListener("click",handleClick)},detachEvents=()=>{window.removeEventListener("resize",handleResize),window.removeEventListener("keyup",handleKeyUp),window.removeEventListener("click",handleClick)},animate=e=>{if(void 0===t.previousAnimationTimestamp){t.previousAnimationTimestamp=e,requestAnimationFrame(animate);return}let a=e-t.previousAnimationTimestamp;"playing"===t.phase&&(updatePathman(),updateGhosts(),updatePellets(),updateStats(a)),l(),t.previousAnimationTimestamp=e,"paused"!==t.phase&&requestAnimationFrame(animate)},run=()=>{console.log("Starting Pathman game...",e),init(),attachEvents(),l(),requestAnimationFrame(animate)},quit=()=>{console.log("Stopping Pathman game..."),t.previousAnimationTimestamp=void 0,detachEvents()},reset=()=>{console.log("Resetting Pathman game..."),quit(),t=getInitialState(),run()};return{run,quit,reset}},core=()=>{let e=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!e.current)return;let t=e.current,l=src_game(t);return l.run(),()=>{l.quit()}},[e.current]),(0,n.jsx)("canvas",{id:"pathman",ref:e})};function Index(){return(0,n.jsx)(core,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);